<nav>
    <!-- Mobile Side Nav -->
    <div id="mobile-side-nav" class="navmenu navmenu-default navmenu-fixed-left offcanvas" role="navigation">
        <div class="list-group">
            <!-- Unauthenticated Dropdown -->
            <div ng-if="!CurrentUser" id="unauth-mobile-side-nav" class="mobile-side-auth-items">
                <a ng-click="toggleGettingStarted()" class="text-center list-group-item">
                    Get Started <span class="caret"></span>
                </a>
                <div ng-if="showGettingStarted">
                    <a ng-click="openRegisterAccountModal(true)" class="list-group-item text-center"><i class="glyphicon glyphicon-hand-up"></i> &nbsp;Sign Up</a>
                </div>
                <div ng-if="showGettingStarted">
                    <a ng-click="openLoginModal(true)" class="list-group-item text-center"><i class="glyphicon glyphicon-log-in"></i> &nbsp;Log In</a>
                </div>
            </div>
            <!-- End /Unauthenticated Dropdown -->

            <!-- Authenticated Dropdown -->
            <div ng-if="CurrentUser" id="auth-mobile-side-nav" class="mobile-side-auth-items">
                <a ng-click="toggleAccountOptions()" class="text-center list-group-item">
                    <img ng-src="{{CurrentUser.photoURL}}" height="20" width="20" class="user-gravitar">
                    &nbsp;{{CurrentUser.displayName}} <span class="caret"></span>
                </a>
                <div ng-if="showAccountOptions" class="text-center list-group-item">
                    <a ng-click="logOut()"><i class="glyphicon glyphicon-log-out"></i> &nbsp;Log Out</a>
                </div>
            </div>
            <!-- Authenticated Dropdown -->

            <!-- Mobile Nav Links -->
            <ul class="list-group">
                <li class="list-group-item text-center" ng-class="{ active: $state.includes('app.home') }">
                    <a ui-sref="app.home" ng-click="closeMobileSideNav()">
                        <div class="row">
                            <div class="col-xs-2 col-xs-offset-2">
                                <i class="fa fa-fw fa-home fa-2x"></i>
                            </div>
                            <div class="col-xs-7 text-left">
                                <b>Home</b>
                            </div>
                        </div>
                    </a>
                </li>
                <li class="list-group-item text-center" ng-class="{ active: $state.includes('app.about') }">
                    <a ui-sref="app.about" ng-click="closeMobileSideNav()">
                        <div class="row">
                            <div class="col-xs-2 col-xs-offset-2">
                                <i class="fa fa-fw fa-info fa-2x"></i>
                            </div>
                            <div class="col-xs-7 text-left">
                                <b>About</b>
                            </div>
                        </div>
                    </a>
                </li>
                <li class="list-group-item text-center" ng-class="{ active: $state.includes('app.services') }">
                    <a ui-sref="app.services" ng-click="closeMobileSideNav()">
                        <div class="row">
                            <div class="col-xs-2 col-xs-offset-2">
                                <i class="fa fa-fw fa-cogs fa-2x"></i>
                            </div>
                            <div class="col-xs-7 text-left">
                                <b>Services</b>
                            </div>
                        </div>
                    </a>
                </li>
                <li class="list-group-item text-center" ng-class="{ active: $state.includes('app.contact') }">
                    <a ui-sref="app.contact" ng-click="closeMobileSideNav()">
                        <div class="row">
                            <div class="col-xs-2 col-xs-offset-2">
                                <i class="fa fa-fw fa-phone fa-2x"></i>
                            </div>
                            <div class="col-xs-7 text-left">
                                <b>Contact</b>
                            </div>
                        </div>
                    </a>
                </li>
            </ul>
            <!-- End \Mobile Nav Links -->
        </div>
    </div>
    <!-- End \Mobile Side Nav -->

    <!-- Top Nav Bar -->
    <div class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Toggle Mobile Side Menu Button -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="offcanvas" 
                    data-target="#mobile-side-nav" data-canvas="body">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a class="navbar-brand" ui-sref="app.home">                 
                    <span class="logo">   
                        <img alt="logo" src="/assets/img/logo.png">
                    </span>
                    <span class="logo-brand">
                        <h2>Web Services</h2>
                    </span>
                </a>
            </div>
            <!-- End \Toggle Mobile Side Menu Button -->

            <!-- Desktop Nav Links -->
            <div class="collapse navbar-collapse" id="nav-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li ng-class="{ active: $state.includes('app.home') }"><a ui-sref="app.home">Home</a></li>
                    <li ng-class="{ active: $state.includes('app.about') }"><a ui-sref="app.about">About</a></li>
                    <li ng-class="{ active: $state.includes('app.services') }"><a ui-sref="app.services">Services</a></li>
                    <li ng-class="{ active: $state.includes('app.contact') }"><a ui-sref="app.contact">Contact</a></li>

                    <!-- Unauthenticated Desktop Dropdown -->
                    <li ng-if="CurrentUser" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{{CurrentUser.username}}  <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a ng-click="logOut()"><i class="glyphicon glyphicon-log-out"></i> &nbsp;Log Out</a></li>
                        </ul>
                    </li>
                    <!-- End \Unauthenticated Desktop Dropdown -->

                    <!-- Authenticated Desktop Dropdown -->
                    <li ng-if="!CurrentUser" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Get Started  <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a ng-click="openRegisterAccountModal()"><i class="glyphicon glyphicon-hand-up"></i> &nbsp;Sign Up</a></li>
                            <li class="divider"></li>
                            <li><a ng-click="openLoginModal()"><i class="glyphicon glyphicon-log-in"></i> &nbsp;Log In</a></li>
                        </ul>
                    </li>
                    <!-- End \Authenticated Desktop Dropdown -->
                </ul>
            </div>
            <!-- End \Desktop Nav Links -->

        </div><!-- /.container-fluid -->
    </div>
    <!-- End \Top Nav Bar -->

    <!-- Register Account Modal -->
    <script type="text/ng-template" id="register-account-modal.html">
        <div class="modal-header">
            <h3 class="modal-title text-center" id="modal-title">Account Sign Up Form</h3>
        </div>
        <div class="modal-body" id="modal-body">

            <!-- alert-box -->
            <alert-box theme="default"></alert-box>
            <!-- /end alert-box -->

            <!-- Sign Up Form -->
            <form 
                class="form-horizontal"
                id="signUpForm" 
                name="signUpForm"
                ng-submit="signUpForm.$valid && submitSignUpForm()"
                novalidate>

                <div class="form-group" ng-class="{ 'has-error'   : signUpForm.userName.$invalid && signUpForm.$submitted,
                                                    'has-success' : signUpForm.userName.$valid && signUpForm.$submitted }">
                    <label for="userName" class="col-sm-3 control-label">Username</label>
                    <div class="col-sm-9">
                        <input 
                            type="text" 
                            class="form-control" 
                            id="userName" 
                            name="userName" 
                            placeholder="Username" 
                            ng-model="newUser.username"
                            ng-minlength="3"
                            ng-maxlength="8"
                            required>
                            <p ng-if="signUpForm.$submitted && signUpForm.userName.$error.required" class="help-block">Username required.</p>
                            <p ng-if="signUpForm.$submitted && signUpForm.userName.$error.minlength" class="help-block">Username is too short.</p>
                            <p ng-if="signUpForm.$submitted && signUpForm.userName.$error.maxlength" class="help-block">Username is too long.</p>
                    </div>
                </div>
                <div class="form-group" ng-class="{ 'has-error'   : signUpForm.userEmail.$invalid && signUpForm.$submitted,
                                                    'has-success' : signUpForm.userEmail.$valid && signUpForm.$submitted }">
                    <label for="userEmail" class="col-sm-3 control-label">Email</label>
                    <div class="col-sm-9">
                        <input 
                            type="email" 
                            class="form-control" 
                            id="userEmail" 
                            name="userEmail" 
                            placeholder="Email" 
                            ng-model="newUser.email"
                            required>
                            <p ng-if="signUpForm.$submitted && signUpForm.userEmail.$invalid" class="help-block">Email must contain an @ sign to be valid.</p>
                    </div>
                </div>
                <div class="form-group" ng-class="{ 'has-error'   : signUpForm.userPass.$invalid && signUpForm.$submitted,
                                                    'has-success' : signUpForm.userPass.$valid && signUpForm.$submitted }">
                    <label for="userPass" class="col-sm-3 control-label">Pass</label>
                    <div class="col-sm-9">
                        <input 
                            type="password" 
                            class="form-control" 
                            id="userPass" 
                            name="userPass" 
                            placeholder="Password" 
                            ng-model="newUser.pass"
                            ng-minlength="8"
                            required>
                            <p ng-if="signUpForm.$submitted && signUpForm.userPass.$error.required" class="help-block">Password is required.</p>
                            <p ng-if="signUpForm.$submitted && signUpForm.userPass.$error.minlength" class="help-block">Password must be at least 8 characters long.</p>
                    </div>
                </div>
                <div class="form-group" ng-class="{ 'has-error'   : signUpForm.userConfirmPass.$invalid && signUpForm.$submitted,
                                                    'has-success' : signUpForm.userConfirmPass.$valid && signUpForm.$submitted }">
                    <label for="userConfirmPass" class="col-sm-3 control-label">Confirm Pass</label>
                    <div class="col-sm-9">
                        <input 
                            type="password" 
                            class="form-control" 
                            id="userConfirmPass"
                            name="userConfirmPass" 
                            placeholder="Confirm Password" 
                            ng-model="newUser.cPass"
                            ui-validate='{passConfirmed : isPassConfirmed}'
                            required>
                            <p ng-if="signUpForm.$submitted && signUpForm.userConfirmPass.$error.required" class="help-block">Confirm password is required.</p>
                            <p ng-if="signUpForm.$submitted && signUpForm.userConfirmPass.$error.passConfirmed" class="help-block">Password and confirm password fields do not match.</p>
                    </div>
                </div>
            </form>
            <!-- End \Sign Up Form -->
        </div>
        <div class="modal-footer">
            <button class="btn btn-warning" type="button" ng-click="closeModal()">Cancel</button>
            <button class="btn btn-primary" form="signUpForm" type="submit">
                <span ng-if="!signupSubmit">Submit</span>
                <span ng-if="signupSubmit">Submitting</span>
            </button>
        </div>
    </script>
    <!-- End \Register Account Modal -->

    <!-- Login Modal -->
    <script type="text/ng-template" id="login-modal.html">
        <div class="modal-header">
            <h3 class="modal-title text-center" id="modal-title">Login Form</h3>
        </div>
        <div class="modal-body" id="modal-body">

            <!-- alert-box -->
            <alert-box theme="default"></alert-box>
            <!-- /end alert-box -->

            <!-- Login Form -->
            <form 
                class="form-horizontal"
                id="loginForm" 
                name="loginForm"
                ng-submit="loginForm.$valid && submitLoginForm()"
                novalidate>
                
                <div 
                    class="form-group" 
                    ng-class="{ 
                        'has-error'     : loginForm.existingUserOrEmail.$invalid && loginForm.$submitted || serverResponse.loginErr,
                        'has-success'   : loginForm.existingUserOrEmail.$valid && loginForm.$submitted && !serverResponse.loginErr,
                        'has-feedback'  : loginForm.existingUserOrEmail.$invalid || loginForm.existingUserOrEmail.$valid
                    }">
                    <label class="control-label sr-only" for="existingUserOrEmail">Username or Email</label>
                    <div class="col-sm-12">

                        <div class="input-group">
                            <span class="input-group-addon">
                                <i class="fa fa-fw fa-user"></i>
                            </span>

                            <input 
                                type="text" 
                                class="form-control" 
                                id="existingUserOrEmail" 
                                name="existingUserOrEmail" 
                                placeholder="Username or email" 
                                ng-model="existingUser.usernameOrEmail"
                                ng-keyup="serverResponse.loginErr = false"
                                ng-minlength="3"
                                required>
                        </div>

                        <span 
                            ng-if="(loginForm.existingUserOrEmail.$touched || loginForm.$submitted) && loginForm.existingUserOrEmail.$valid && !serverResponse.loginErr" 
                            class="glyphicon glyphicon-ok darkgreen form-control-feedback" 
                            aria-hidden="true">
                        </span>

                        <span 
                            ng-if="(loginForm.existingUserOrEmail.$touched || loginForm.$submitted) && loginForm.existingUserOrEmail.$invalid || serverResponse.loginErr" 
                            class="glyphicon glyphicon-remove darkred form-control-feedback" 
                            aria-hidden="true">
                        </span>

                        <p ng-if="loginForm.$submitted && loginForm.existingUserOrEmail.$error.required" class="help-block">Required</p>
                        <p ng-if="loginForm.$submitted && loginForm.existingUserOrEmail.$error.minlength" class="help-block">Too short</p>
                    </div><!-- end col -->
                </div>

                <div 
                    class="form-group" 
                    ng-class="{ 
                        'has-error'     : loginForm.existingPass.$invalid && loginForm.$submitted || serverResponse.loginErr,
                        'has-success'   : loginForm.existingPass.$valid && loginForm.$submitted && !serverResponse.loginErr,
                        'has-feedback'  : loginForm.existingPass.$invalid || loginForm.existingPass.$valid
                    }">
                    <label class="control-label sr-only" for="existingPass">Password</label>
                    <div class="col-sm-12">

                        <div class="input-group">
                            <span class="input-group-addon">
                                <i class="fa fa-fw fa-lock"></i>
                            </span>

                            <input 
                                type="password" 
                                class="form-control" 
                                id="existingPass" 
                                name="existingPass" 
                                placeholder="Password" 
                                ng-model="existingUser.pass"
                                ng-keyup="serverResponse.loginErr = false"
                                ng-minlength="8"
                                required>
                        </div>

                        <span 
                            ng-if="(loginForm.existingPass.$touched || loginForm.$submitted) && loginForm.existingPass.$valid && !serverResponse.loginErr" 
                            class="glyphicon glyphicon-ok darkgreen form-control-feedback" 
                            aria-hidden="true">
                        </span>

                        <span 
                            ng-if="(loginForm.existingPass.$touched || loginForm.$submitted) && loginForm.existingPass.$invalid || serverResponse.loginErr" 
                            class="glyphicon glyphicon-remove darkred form-control-feedback" 
                            aria-hidden="true">
                        </span>

                        <span ng-if="loginForm.$submitted && loginForm.existingPass.$error.required" class="help-block">Required</span>
                        <span ng-if="loginForm.$submitted && loginForm.existingPass.$error.minlength" class="help-block">Too short</span>
                    </div><!-- end col -->
                </div>
            </form>
            <!-- End /Login Form -->
        </div>
        <div class="modal-footer">
            <button class="btn btn-warning" type="button" ng-click="closeModal()">Cancel</button>
            <button class="btn btn-primary" form="loginForm" type="submit">
                <span ng-if="!loginSubmit">Submit</span>
                <span ng-if="loginSubmit"><i class="fa fa-spin fa-spinner"></i> &nbsp;Submitting</span>
            </button>
        </div>
    </script>
    <!-- End \Login  Modal -->
</nav>